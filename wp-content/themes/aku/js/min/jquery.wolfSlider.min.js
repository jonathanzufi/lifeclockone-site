/*!
Plugin: Wolf Slider
Version 1.0.0
Author: Constantin Saguin
Twitter: @wolf_themes
Author URL: http://csag.co

An enhanced version of flexslider that support video background and caption transition effects
*/
!function(a,b,c,d){c.wolfslider=function(d,e){var f,g=(c("html").hasClass("touch"),navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i)?!1:!0),h={animation:"fade",slideshow:!1,pauseOnHover:!0,slideshowSpeed:4e3,controlNav:!0,directionNav:!0},i=this,j=d.selector,k=c(j),l=[];i.settings={},i.init=function(){i.settings=c.extend({},h,e),k.flexslider({animation:i.settings.animation,slideshow:i.settings.slideshow,pauseOnHover:i.settings.pauseOnHover,slideshowSpeed:i.settings.slideshowSpeed,controlNav:i.settings.controlNav,directionNav:i.settings.directionNav,start:function(){f.init(),f.playVideo()},before:function(){f.pauseAllVideos()},after:function(){f.playVideo()}})},f={init:function(){var b=this;this.initPlayer(),this.loadAllVideos(),this.videoBackground(),this.playVideo(),this.playButton(),this.muteButton(),c(a).resize(function(){b.videoBackground()}).resize()},initPlayer:function(){var a={loop:!0,features:[],enableKeyboard:!1,pauseOtherPlayers:!1};c(".wolf-slide").find(".wolf-slide-video").each(function(){var b=c(this).data("video-id");l[b]=new MediaElementPlayer("#wolf-slide-video-"+b,a)}),this.cleanPlayersTags()},cleanPlayersTags:function(){c(".wolf-slide").find(".mejs-controls, .mejs-clear, .mejs-layers").remove(),c(".wolf-slide").find(".mejs-container").replaceWith(function(){return c('<span class="mejs-container" />').append(c(this).contents())}),c(".wolf-slide").find(".mejs-inner").replaceWith(function(){return c('<span class="mejs-inner" />').append(c(this).contents())}),c(".wolf-slide").find(".mejs-mediaelement").replaceWith(function(){return c('<span class="mejs-mediaelement" />').append(c(this).contents())})},loadAllVideos:function(){c(".wolf-slide").find(".wolf-slide-video").each(function(){var a=c(this).data("video-id");l[a].play(),l[a].pause(),c(this).parents(".wolf-slide").addClass("pause")})},playVideo:function(){if(c(".flex-active-slide").find(".wolf-slide-video").length){var a,d,e,f,h,i=c(".flex-active-slide");f=i.find(".wolf-slide-video"),a=f.data("video-id"),d=f.data("video-mute"),e=f.data("video-play"),!0===e&&g&&(l[a].play(),i.removeClass("pause")),l[a].setMuted(d),h=b.getElementById("wolf-slide-video-"+a),g&&(h.readyState>=h.HAVE_FUTURE_DATA?i.find(".wolf-slide-video-fallback").css({opacity:0}):h.addEventListener("canplay",function(){i.find(".wolf-slide-video-fallback").css({opacity:0})},!1))}},pauseAllVideos:function(){c(".wolf-slide").find(".wolf-slide-video").each(function(){var a=c(this).data("video-id");l[a].pause()})},muteButton:function(){c(".wolf-slide-mute-button").each(function(){c(this).on("click",function(){var a,b,d,e,f=c(this).data("video-mute-id");d=c("#wolf-slide-video-"+f),b=d.parents(".wolf-slide"),e=d.data("video-mute"),a=l[f],!0===e?(l[f].setMuted(!1),d.data("video-mute",!1),b.toggleClass("unmute")):(l[f].setMuted(!0),d.data("video-mute",!0),b.toggleClass("unmute"))})})},playButton:function(){c(".wolf-slide-play-button").each(function(){c(this).on("click",function(){var a,b,d,e,f=c(this).data("video-play-id");d=c("#wolf-slide-video-"+f),b=d.parents(".wolf-slide"),e=d.data("video-play"),a=l[f],!0===e?(l[f].pause(),d.data("video-play",!1),b.addClass("pause")):(l[f].play(),d.data("video-play",!0),b.removeClass("pause"))})})},videoBackground:function(){var a,b,d,e,f,g=c(".wolf-slide-video-container").width(),h=c(".wolf-slide-video-container").height(),i=c(".wolf-slide-video, .wolf-slide-video-fallback"),j=640,k=360,l=j/k;g/h>=l?(b=g,a=Math.floor(g/j*k)+2,e=Math.floor((h-a)/4),f={width:b,height:a,marginTop:e,marginLeft:0},i.css(f)):l>g/h&&(a=h,b=Math.floor(h/k*j),d=Math.floor((g-b)/4),f={width:b,height:a,marginLeft:d,marginTop:0},i.css(f))}},i.init()},c.fn.wolfslider=function(a){if(!c.data(this,"_wolfslider")){var b=new c.wolfslider(this,a);this.data("_wolfslider",b)}return this.data("_wolfslider")}}(window,document,jQuery);